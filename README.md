# Base-de-datos-EPS
A CONTINUACION AGREGO LAS TABLAS PARA SER GENERADAS EN SQL A TRAVES DE POSTGRES, IMPORTANTE AGREGARLAS EN ESTE MISMO ORDEN, PUES, POR TEMAS DE LLAVES FORANEAS CREA CONFLICTO EN UN ORDEN DISTINTO DE LAS TABLAS.

CREATE TABLE IPS(
NIT INTEGER NOT NULL,
Razon_Social VARCHAR(50) NOT NULL,
Nivel_Atencion VARCHAR(50) NOT NULL,
PRIMARY KEY (NIT)
);

CREATE TABLE Afiliado(
Num_Doc INTEGER NOT NULL,
Tipo_Doc VARCHAR(10) NOT NULL,
Apellidos VARCHAR(50) NOT NULL,
Nombres VARCHAR(50) NOT NULL,
Fecha_Nac DATE NOT NULL,
Genero VARCHAR(10) NOT NULL,
Direccion VARCHAR(50),
Telefono VARCHAR(50) NOT NULL,
Ciudad VARCHAR(50) NOT NULL,
Estado_Civil VARCHAR(20) NOT NULL,
Correo VARCHAR(55) NOT NULL, 
Estado VARCHAR(10) CHECK (Estado IN ('Activo','Inactivo','Retirado')) NOT NULL,
Nit_ips INTEGER NOT NULL,
PRIMARY KEY (Num_Doc),
FOREIGN KEY (Nit_ips) REFERENCES IPS(NIT)
);

CREATE TABLE Cotizante( 
Num_Doc INTEGER NOT NULL,
Tipo_Doc VARCHAR(10) NOT NULL,
Fecha_Afil DATE NOT NULL,
Salario FLOAT NOT NULL,
Rango VARCHAR(1) CHECK (Rango IN ('A','B','C')) NOT NULL,
PRIMARY KEY (Num_Doc),
FOREIGN KEY (Num_Doc) REFERENCES Afiliado(Num_Doc)
);

CREATE TABLE Beneficiario(
Num_Doc INTEGER NOT NULL,
Tipo_Doc VARCHAR(10) NOT NULL,
C_Num_Doc INTEGER NOT NULL,
Parentesco VARCHAR(50) NOT NULL,
PRIMARY KEY (Num_Doc),
FOREIGN KEY (Num_Doc) REFERENCES Afiliado(Num_Doc),
FOREIGN KEY (C_Num_Doc) REFERENCES Cotizante(Num_Doc)
);

CREATE TABLE EMPRESA(
E_NIT INTEGER NOT NULL,
Razon_Social VARCHAR(50) NOT NULL,
Ciudad VARCHAR(50) NOT NULL,
Direccion VARCHAR(50) NOT NULL,
Nombre_Contacto VARCHAR(100) NOT NULL,
PRIMARY KEY (E_NIT)
);

CREATE TABLE CONTRATO(
Num_Radicado INTEGER NOT NULL,
Cot_Num INTEGER NOT NULL,
Empre_Nit INTEGER NOT NULL,
Fecha_Rec DATE NOT NULL,
Salario_Base FLOAT NOT NULL,
Estado VARCHAR(15) CHECK (Estado in('Activo','Inactivo','Retirado')) NOT NULL,
Fecha_retiro DATE,
Rad_retiro INTEGER,
Tipo_Cot VARCHAR(20) CHECK (Tipo_Cot in ('Dependiente','Independiente')) NOT NULL,
Nit_Empresa INTEGER,
RUT INTEGER,
PRIMARY KEY (Num_Radicado),
FOREIGN KEY (Cot_Num) REFERENCES Cotizante(Num_Doc),
FOREIGN KEY (Empre_Nit) REFERENCES EMPRESA(E_NIT),
CHECK (
	(Tipo_Cot = 'Dependiente' AND Nit_Empresa IS NOT NULL AND RUT IS NULL) OR
	(Tipo_Cot = 'Independiente' AND RUT IS NOT NULL AND Nit_Empresa IS NULL)
   )
);

CREATE TABLE PAGO_APORTE(
Codigo_Pago INTEGER NOT NULL,
Num_Rad INTEGER NOT NULL,
Fecha_pago DATE NOT NULL,
Valor FLOAT NOT NULL,
PRIMARY KEY (Codigo_pago),
FOREIGN KEY (Num_Rad) REFERENCES CONTRATO(Num_Radicado)
);

CREATE TABLE ORDENES(
Cod_Orden INTEGER NOT NULL,
Fecha DATE NOT NULL,
Doc_Paciente INTEGER NOT NULL,
Medico VARCHAR(100) NOT NULL,
Diagnostico VARCHAR(500) NOT NULL,
PRIMARY KEY (Cod_Orden),
FOREIGN KEY (Doc_Paciente) REFERENCES Afiliado(Num_Doc)
);

CREATE TABLE SERVICIOS(
Codigo_Servicio INTEGER NOT NULL,
Cod_Orden INTEGER NOT NULL,
Descripcion VARCHAR(100) NOT NULL,
PRIMARY KEY (Codigo_Servicio),
FOREIGN KEY(Cod_Orden) REFERENCES ORDENES(Cod_Orden)
);
